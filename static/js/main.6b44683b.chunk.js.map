{"version":3,"sources":["redux/timerReducer.js","redux/store.js","jeff/jeffsBetterReducer.js","jeff/jeffsActions.js","timer/TimerContext.js","misc/timeHelper.js","redux/timerSelectors.js","misc/style.js","HeaderClock.jsx","timer/TimerProgressIndicator.jsx","timer/TimerWidget.jsx","misc/UtilityFloat.jsx","misc/UnstyledButton.jsx","misc/BsButton.jsx","timer/TimerOptions.jsx","timer/Timer.jsx","timer/AddTimerButton.jsx","Header.jsx","timer/ViewTimerContainer.jsx","boxes/Box.jsx","boxes/ReadmeBox.jsx","boxes/CatBox.jsx","boxes/VideoBox.jsx","misc/useDebouncedWindowSize.js","Root.jsx","movement.js","index.js","jeff/addInitialTimers.js"],"names":["selectTimerNextUnusedId","state","Math","max","_","map","instances","initialState","movement","clientTick","mod","epochTime","showOptionsOnId","menu","readmeBox","catBox","videoBox","timerReducer","action","type","timer_id","start_time","duration_seconds","title","related_view","instance","filter","timerContext","view","mapValues","jeffsBetterReducer","reducer","newState","destination","get","path","isArray","Error","set","record","enhanceReducer","combineReducers","timer","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","TimerContext","createContext","widgetDisplay","formatTimeHMS","seconds","secs","abs","hrs","floor","min","result","round","instanceSort","a","b","timeRemaining","selectCalculatedTimers","createSelector","timeElapsed","progress","formattedTime","sort","color","boringGrey","success","danger","primaryBlue","notQuiteBlack","rotateKeyframes","keyframes","ClockRoot","styled","div","fontSize","whiteSpace","Clock","React","memo","props","useSelector","d","Date","toString","π","PI","Track","circle","strokeWidth","stroke","fill","ProgressPath","ProgressCircle","withComponent","Blink","Exclamation","animation","TimerProgressIndicator","R","W","H","CX","CY","PROG_START_X","PROG_START_Y","EXC_X","EXC_W","EXC_Y","EXC_H","partialPath","prog_end_θ","prog_end_X","cos","prog_end_Y","sin","is_large_arc","prog_path_D","width","height","viewBox","cx","cy","r","trackColor","transform","TimerWidgetRoot","backgroundColor","borderRadius","display","flexDirection","justifyContent","padding","cursor","Graphic","flex","overflow","paddingRight","alignItems","Labels","jumbo","paddingLeft","paddingTop","textAlign","Title","textOverflow","Time","TimerWidget","useContext","style","onClick","indicatorR","UtilityFloat","boxShadow","UtilityFloatAbsolute","position","zIndex","minWidth","UnstyledButton","button","backgroundImage","border","outline","BsButtonRoot","userSelect","BsButton","className","icon","children","TimerOptionsRoot","marginLeft","marginTop","TimerOptionButton","marginBottom","TimerOptions","dispatch","useDispatch","e","TimerRoot","Timer","containerRef","useRef","isShowingOptions","contextView","selectTimerIsShowingOptions","useEffect","handleOutsideClick","current","contains","target","document","addEventListener","removeEventListener","ref","stopPropagation","MenuAddTimerButton","margin","AddTimerButton","handleClick","HeaderRoot","Timers","flexWrap","SpacedTimer","timerContextInfo","Header","timerInstances","Provider","value","k","key","HeaderClock","ViewTimerContainer","find","selectTimerByView","Box","borderWidth","borderStyle","borderColor","BoxTitle","borderBottomWidth","borderBottomStyle","borderBottomColor","BoxViewTimerContainer","ReadmeBoxRoot","gridColumn","SuccessSpan","span","SuccessLink","textDecoration","SrcA","href","file","CommentSpan","fontFamily","fontWeight","SpinningIcon","FontAwesomeIcon","GrantMessage","ReadmeBox","Cat","img","CatBox","src","random","VIDEOS","getHeight","SelectContainer","VideoFrameContainer","top","left","VideoBox","videoContainerRef","useState","keys","videoId","setVideoId","windowSize","delay","setWindowSize","useLayoutEffect","handleResize","debounce","$","useDebouncedWindowSize2","measuredWidth","setMeasuredWidth","console","debug","innerWidth","deleteRelatedTimers","videoOpts","onChange","currentTarget","v","YouTube","opts","onPlay","getDuration","getCurrentTime","onPause","RootContainer","BoxContainer","gridTemplateColumns","gap","Root","start","unsubscribe","subscribe","handleStoreUpdate","tick","handleTick","stop","timeout","clearTimeout","time","now","setTimeout","this","currentState","library","add","faTrashAlt","faBed","faPlusCircle","faCannabis","faThumbsUp","faBookOpen","faHeadSideCough","ReactDOM","render","StrictMode","getElementById","getState","getInsertRecordAction","addInitialTimers"],"mappings":"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","file":"static/js/main.6b44683b.chunk.js","sourcesContent":["import _ from 'lodash'\n\nexport const selectTimerNextUnusedId = (state) => {\n\treturn Math.max(0, ..._.map(state.instances, 'timer_id')) + 1\n}\n\nconst initialState = {\n\tmovement: {\n\t\tclientTick: null,\n\t\tmod: null,\n\t\tepochTime: null,\n\t},\n\tinstances: [],\n\tshowOptionsOnId: {\n\t\tmenu: null,\n\t\treadmeBox: null,\n\t\tcatBox: null,\n\t\tvideoBox: null,\n\t},\n}\n\nconst timerReducer = (state = initialState, action) => {\n\tswitch(action.type) {\n\t\tcase 'TIMER_MOVEMENT_TICK':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmovement: {\n\t\t\t\t\t...state.movement,\n\t\t\t\t\tclientTick: action.clientTick,\n\t\t\t\t\tmod: action.mod,\n\t\t\t\t\tepochTime: action.epochTime,\n\t\t\t\t}\n\t\t\t}\n\t\tcase 'TIMER_CREATE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tinstances: [\n\t\t\t\t\t...state.instances,\n\t\t\t\t\t{\n\t\t\t\t\t\t// in the real application, these timers would come\n\t\t\t\t\t\t// back from posting to the server with database ids\n\t\t\t\t\t\t// attached.  we're emulating that here.\n\t\t\t\t\t\ttimer_id: selectTimerNextUnusedId(state),\n\t\t\t\t\t\tstart_time: state.movement.epochTime,\n\t\t\t\t\t\tduration_seconds: action.duration_seconds,\n\t\t\t\t\t\ttitle: action.title || 'Timer',\n\t\t\t\t\t\trelated_view: action.related_view,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t}\n\t\tcase 'TIMER_SNOOZE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tinstances: state.instances.map(instance => {\n\t\t\t\t\tif(instance.timer_id === action.timer_id) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...instance,\n\t\t\t\t\t\t\tduration_seconds: instance.duration_seconds + 300,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn instance\n\t\t\t\t}),\n\t\t\t}\n\t\tcase 'TIMER_DELETE':\n\t\t\tif(action.timer_id) {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tinstances: state.instances.filter(instance => (instance.timer_id !== action.timer_id)),\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(action.related_view) {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tinstances: state.instances.filter(instance => (instance.related_view !== action.related_view)),\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn state\n\t\tcase 'TIMER_OPTIONS_SHOW':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tshowOptionsOnId: {\n\t\t\t\t\t[action.timerContext.view]: action.timer_id,\n\t\t\t\t},\n\t\t\t}\n\t\tcase 'TIMER_OPTIONS_HIDE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tshowOptionsOnId: _.mapValues(state.showOptionsOnId, () => null),\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default timerReducer\n","import { combineReducers, createStore } from 'redux'\nimport timerReducer from './timerReducer'\nimport { enhanceReducer } from '../jeff/jeffsBetterReducer'\n\n// NOTE\n// https://redux.js.org/faq/reducers#how-do-i-share-state-between-two-reducers-do-i-have-to-use-combinereducers\n/* \n\"In general, remember that reducers are just functions—you can organize them\nand subdivide them any way you want, and you are encouraged to break them down\ninto smaller, reusable functions (“reducer composition”). While you do so,\nyou may pass a custom third argument from a parent reducer if a child reducer\nneeds additional data to calculate its next state. You just need to make sure\nthat together they follow the basic rules of reducers:\n(state, action) => newState,\nand update state immutably rather than mutating it directly.\n*/\n// There's a million ways to structure your state.\n// Use of combinedReducers is not required, but it's a nice way to separate\n// things out.\n// https://redux.js.org/recipes/structuring-reducers/structuring-reducers\n\nconst reducer = combineReducers({\n\ttimer: timerReducer,\n})\n\nconst jeffsBetterReducer = enhanceReducer(reducer)\n\n// NOTE\n// Look into redux-devtools-extension for Chrome/Firefox to help you see into\n// the state and its changes while testing.\n// https://github.com/zalmoxisus/redux-devtools-extension\n\nconst store = createStore(jeffsBetterReducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\nexport default store\n","import _ from 'lodash'\nimport { TYPE_INSERT_RECORD } from './jeffsActions'\n\n// NOTE—  Jeff, this one's for you!\n//\n// Here's a super generic \"record inserting\" reducer\n// (without a switch statement, persay)\n//\n// I'm not saying this is a good idea.  It's simply to demonstrate the\n// flexibility in approaches that Redux provides to the architect.\n\nexport const jeffsBetterReducer = (state, action) => {\n\tif(action.type === TYPE_INSERT_RECORD) {\n\t\tlet newState = { ...state }\n\t\tconst destination = _.get(state, action.path)\n\t\tif(!_.isArray(destination)) {\n\t\t\tthrow new Error(\"Couldn't find destination array\")\n\t\t}\n\t\t_.set(newState, action.path, [\n\t\t\t...destination,\n\t\t\taction.record,\n\t\t])\n\t\treturn newState\n\t}\n\n\treturn state\n}\n\nexport const enhanceReducer = (reducer) => {\n\treturn (state, action) => {\n\t\tstate = reducer(state, action)\n\t\tstate = jeffsBetterReducer(state, action)\n\t\treturn state\n\t}\n}\n","import store from '../redux/store'\n\nexport const TYPE_INSERT_RECORD = 'INSERT_RECORD'\n\n// NOTE\n// If you don't like string and object literals, you can create actions.\n// https://redux.js.org/basics/actions\n\nexport const getInsertRecordAction = (path, record) => ({\n\ttype: TYPE_INSERT_RECORD,\n\tpath,\n\trecord,\n})\n\n// NOTE\n// Woah, self-dispatching!  It totally works...  Do we hate it?  🤷‍♂️\n\nexport const insertRecord = (path, record) => {\n\tstore.dispatch(getInsertRecordAction(path, record))\n}\n","import { createContext } from 'react'\n\nconst initialValue = {\n\tview: 'modal',\n\ttitle: null,\n\twidgetDisplay: 'regular',\n}\n\nconst TimerContext = createContext(initialValue)\nexport default TimerContext\n","/**\n * Convert default MySQL formatted date/time strings into UTC ISO8601 string\n * (important for Javascript to handle timezone correctly)\n * @param {String} date_string (This can contain date and time concatenated by a space)\n * @param {String} time_string \n */\nexport function get8601FromMySQLDateTime(date_string, time_string = null) {\n\tif(time_string === null) {\n\t  [ date_string, time_string ] = date_string.split(' ')\n\t}\n\treturn `${date_string}T${time_string}Z`\n  }\n  \n  /**\n   * Convert default MySQL formatted date/time strings into UTC UNIX epoch time\n   * @param {String} date_string (This can contain date and time concatenated by a space)\n   * @param {String} time_string \n   */\n  export function getEpochTimeFromMySQLDateTime(date_string, time_string = null) {\n\treturn Math.floor(Date.parse(get8601FromMySQLDateTime(date_string, time_string)) / 1000)\n  }\n  \n  /**\n   * Converts a number of seconds to 'HH:MM:SS' formatted string\n   * @param {Number} seconds \n   */\n  export function formatTimeHMS(seconds) {\n\tlet secs = Math.abs(seconds)\n  \n\tlet hrs = Math.floor(secs / 3600)\n\tlet min = Math.floor((secs - (hrs * 3600)) / 60)\n\tsecs = secs - (hrs * 3600) - (min * 60)\n\tsecs = Math.round(secs * 100) / 100\n  \n\tlet result = seconds < 0 ? \"-\" : ''\n\tresult += (hrs < 10 ? \"0\" + hrs : hrs)\n\tresult += \":\" + (min < 10 ? \"0\" + min : min)\n\tresult += \":\" + (secs < 10 ? \"0\" + secs : secs)\n  \n\treturn result;\n  }\n  ","import { createSelector } from 'reselect'\nimport _ from 'lodash'\nimport { formatTimeHMS } from '../misc/timeHelper'\n\nconst selectEpochTime = (state) => state.timer.movement.epochTime\nconst selectInstances = (state) => state.timer.instances\nconst instanceSort = (a, b) => a.timeRemaining - b.timeRemaining\n\n// NOTE\n// Selectors are the sanctioned way to create derived data from the state tree.\n// Memoized selectors (reselect's createSelector) save the results of the\n// computation and only re-calculate when the underlying state changes.\n// https://redux.js.org/recipes/computing-derived-data\n// This one even sorts the timers by timeRemaining automatically.\n\nexport const selectCalculatedTimers = createSelector(\n  selectEpochTime,\n  selectInstances,\n  (epochTime, instances) => {\n    return instances.map((instance) => {\n      const timeElapsed = (epochTime - instance.start_time)\n      const timeRemaining = (instance.start_time + instance.duration_seconds - epochTime)\n      const progress = (timeElapsed / instance.duration_seconds)\n      return {\n        ...instance,\n        timeElapsed,\n        timeRemaining,\n        formattedTime: formatTimeHMS(timeRemaining),\n        progress,\n      }\n    }).sort(instanceSort)  // also order by expiring first\n  }\n)\n\nexport const selectTimerById = (state, timer_id) => {\n  return _.find(selectCalculatedTimers(state), {timer_id})\n}\n\nexport const selectTimerByView = (state, related_view) => {\n  return _.find(selectCalculatedTimers(state), {related_view})\n}\n\nexport const selectTimerIsShowingOptions = (state, contextView, timer_id) => {\n  return (state.timer.showOptionsOnId[contextView] === timer_id)\n}\n","import { keyframes } from '@emotion/core'\n\nexport const borderRadius = 5\n\nexport const color = {\n\tboringGrey: '#8d8d8d',\n\tsuccess: '#5cb85c',\n\tdanger: '#d9534f',\n\tprimaryBlue: '#517ffc',\n\tnotQuiteBlack: '#1a1a1a',\n}\n\nexport const headerPadding = 10\n\nexport const rotateKeyframes = keyframes`\n\tfrom {\n\t\ttransform: rotate(0deg);\n\t}\n\tto {\n\t\ttransform: rotate(359deg);\n\t}\n`\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport styled from '@emotion/styled'\n\nconst ClockRoot = styled.div({\n\tfontSize: '16px',\n\twhiteSpace: 'nowrap',\n})\n\n// NOTE\n// Hooks + Redux = tidy, predictable code\n\nconst Clock = React.memo(props => {\n\tconst clientTick = useSelector(state => state.timer.movement.clientTick)\n\tconst d = new Date(clientTick)\n\t\n\treturn (\n\t\t<ClockRoot>\n\t\t\t{d.toString()}\n\t\t</ClockRoot>\n\t)\n})\n\nexport default Clock\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { keyframes } from '@emotion/core'\nimport { color } from '../misc/style'\n\nconst π = Math.PI\n\nconst TRACK_STROKE_W = 2\nconst PROG_STROKE_W = 3\n\n// exclamation path was a bit wacked on export,\n// so we correct origin manually here (eyeballed on zoom)\nconst EXC_OX = -1.4\nconst EXC_OY = 13\nconst EXC_W = 3.7  // browser measures 3.17; on my chrome it looks more accurate at 3.7\nconst EXC_H = 13.24\n\n// NOTE\n// One benefit of Emotion's styled components—\n// You can define measurements in one place— as constants in Javascript\n// and use them across HTML, CSS, JS\n\nconst Track = styled.circle(props => ({\n\tstrokeWidth: TRACK_STROKE_W,\n\tstroke: props.stroke || color.boringGrey,\n\tfill: 'transparent',\n}))\n\nconst ProgressPath = styled.path({\n\tstrokeWidth: PROG_STROKE_W,\n\tstroke: 'white',\n    fill: 'transparent',\n})\n\nconst ProgressCircle = ProgressPath.withComponent('circle')\n\nconst Blink = keyframes`50% { fill: white; }`\nconst Exclamation = styled.path({\n\tfill: 'transparent',\n\tanimation: `${Blink} 1s step-start infinite`,\n})\n\n// NOTE\n// Because this is a memoized component, it will not re-render\n// unless its props change.\n\nconst TimerProgressIndicator = React.memo(props => {\n\tconst R = props.R || 13.5\n\tconst W = (R + PROG_STROKE_W) * 2\n\tconst H = W\n\tconst CX = W / 2\n\tconst CY = H / 2\n\tconst PROG_START_X = CX  // start the progress ARC @ 12:00\n\tconst PROG_START_Y = CY - R\n\tconst EXC_X = EXC_OX + CX - (EXC_W / 2)\n\tconst EXC_Y = EXC_OY + CY - (EXC_H / 2)\n\t\n\tconst progress = Math.max(props.progress || 0, 0)\n\n\tlet partialPath = null\n\tif(progress < 1) {\n\t\tconst prog_end_θ = (-0.5 * π) - (progress * (2 * π))\n\t\tconst prog_end_X = (Math.cos(prog_end_θ) * R) + CX\n\t\tconst prog_end_Y = (Math.sin(prog_end_θ) * R) + CY\n\t\tconst is_large_arc = (progress <= .5) ? 0 : 1\n\t\tconst prog_path_D = `M ${PROG_START_X} ${PROG_START_Y} A ${R} ${R} 0 ${is_large_arc} 0 ${prog_end_X} ${prog_end_Y}`\n\t\tpartialPath = (\n\t\t\t<ProgressPath d={prog_path_D} />\n\t\t)\n\t}\n\n\treturn (\n\t\t<svg width={W} height={H} viewBox={`0 0 ${W} ${H}`}>\n\t\t\t<Track cx={CX} cy={CY} r={R} stroke={props.trackColor} />\n\t\t\t{partialPath ? partialPath : (\n\t\t\t\t<>\n\t\t\t\t\t<ProgressCircle cx={CX} cy={CY} r={R} />\n\t\t\t\t\t<Exclamation\n\t\t\t\t\t\td=\"M4.716-13.113v5.148a13.6,13.6,0,0,1-.1,1.643q-.1.814-.261,1.66H2.466Q2.3-5.508,2.2-6.322a13.6,13.6,0,0,1-.1-1.643v-5.148ZM1.8-1.413a1.494,1.494,0,0,1,.121-.6A1.524,1.524,0,0,1,2.254-2.5a1.589,1.589,0,0,1,.5-.329,1.6,1.6,0,0,1,.63-.122,1.581,1.581,0,0,1,.621.122,1.645,1.645,0,0,1,.5.329,1.49,1.49,0,0,1,.338.486,1.494,1.494,0,0,1,.122.6,1.526,1.526,0,0,1-.122.608,1.477,1.477,0,0,1-.338.491,1.58,1.58,0,0,1-.5.324,1.634,1.634,0,0,1-.621.117,1.658,1.658,0,0,1-.63-.117,1.527,1.527,0,0,1-.5-.324,1.511,1.511,0,0,1-.333-.491A1.526,1.526,0,0,1,1.8-1.413Z\"\n\t\t\t\t\t\ttransform={`translate(${EXC_X} ${EXC_Y})`}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</svg>\n\t)\n})\n\nexport default TimerProgressIndicator\n","import React, { useContext } from 'react'\nimport styled from '@emotion/styled'\nimport * as style from '../misc/style'\nimport TimerContext from './TimerContext'\nimport TimerProgressIndicator from './TimerProgressIndicator'\n\nconst TimerWidgetRoot = styled.div(props => ({\n\tbackgroundColor: props.backgroundColor,\n\tcolor: 'white',\n\tborderRadius: style.borderRadius,\n\tdisplay: 'flex',\n\tflexDirection: 'row',\n\tjustifyContent: 'center',\n\tpadding: '7px 15px',\n\tcursor: 'pointer',\n}))\n\nconst Graphic = styled.div(props => ({\n\tflex: '0 0 auto',\n    overflow: 'hidden',  // https://stackoverflow.com/a/43809765\n    paddingRight: '7px',\n    display: 'flex',\n\tflexDirection: 'row',\n\tjustifyContent: 'flex-end',\n\talignItems: 'center',\n}))\n\nconst Labels = styled.div(props => ({\n\tflex: '1 1 auto',\n    overflow: props.jumbo ? 'visible' : 'hidden',  // https://stackoverflow.com/a/43809765\n    paddingLeft: '7px',\n    paddingTop: props.jumbo ? 0 : '2.5px',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'flex-start',\n    textAlign: 'left',\n}))\n\nconst Title = styled.div(props => ({\n\tdisplay: props.jumbo ? 'none' : 'block',\n\tfontSize: '14px',\n\twhiteSpace: 'nowrap',\n\ttextOverflow: 'ellipsis',\n\twidth: '100%',\n\toverflow: 'hidden',\n}))\n\nconst Time = styled.div(props => ({\n\tfontSize: props.jumbo ? '22px' : '12px',\n}))\n\nconst TimerWidget = React.memo(props => {\n\tconst timerContext = useContext(TimerContext)\n\tconst instance = props.instance\n\n\tconst jumbo = (timerContext.widgetDisplay === 'jumbo')\n\n\tlet backgroundColor = style.color.success\n\tlet trackColor = '#479644'\n\n\tif(instance.timeRemaining <= 0) {\n\t\tbackgroundColor = style.color.danger\n\t\ttrackColor = 'white'\n\t} else if(instance.timeRemaining < 60) {\n\t\tbackgroundColor = '#EB9D50'\n\t\ttrackColor = '#C37427'\n\t}\n\n\treturn (\n\t\t<TimerWidgetRoot backgroundColor={backgroundColor} onClick={props.onClick}>\n\t\t\t<Graphic jumbo={jumbo}>\n\t\t\t\t<TimerProgressIndicator R={props.indicatorR} trackColor={trackColor} progress={instance.progress} />\n\t\t\t</Graphic>\n\t\t\t<Labels jumbo={jumbo}>\n\t\t\t\t<Title jumbo={jumbo}>{instance.title}</Title>\n\t\t\t\t<Time jumbo={jumbo}>{instance.formattedTime}</Time>\n\t\t\t</Labels>\n\t\t</TimerWidgetRoot>\n\t)\n})\n\nexport default TimerWidget\n","import styled from '@emotion/styled'\nimport * as style from './style'\n\nexport const UtilityFloat = styled.div({\n\tbackgroundColor: 'white',\n\tboxShadow: '0px 3px 6px rgba(0,0,0,.16)',\n  \tborderRadius: `0 ${style.borderRadius}px ${style.borderRadius}px ${style.borderRadius}px`,\n})\n\nexport const UtilityFloatAbsolute = styled(UtilityFloat)({\n\tposition: 'absolute',\n\tzIndex: 2,\n  \tminWidth: '100%',\n})\n","import styled from '@emotion/styled'\n\nconst UnstyledButton = styled.button({\n\t// sort of yanked from BS3\n\tdisplay: 'inline-block',\n    cursor: 'pointer',\n\tbackgroundImage: 'none',\n\tborder: '1px solid transparent',\n\twhiteSpace: 'nowrap',\n\toutline: 'none',\n})\n\nexport default UnstyledButton\n","import React from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport styled from '@emotion/styled'\nimport UnstyledButton from './UnstyledButton'\nimport * as style from './style'\n\nconst BsButtonRoot = styled(UnstyledButton)(props => ({\n\t// sort of yanked from BS3\n\tpadding: '6px 12px',\n\tfontSize: '14px',\n\tuserSelect: 'none',\n\n\tborderRadius: style.borderRadius,\n\tbackgroundColor: style.color[props.backgroundColor] || style.color.boringGrey,\n\tcolor: 'white',\n\n\t'&:hover': {\n\t\tcolor: '#ddd',\n\t}\n}))\n\nconst BsButton = React.memo(props => (\n\t<BsButtonRoot\n\t\tbackgroundColor={props.color}\n\t\tclassName={props.className}\n\t\tonClick={props.onClick}\n\t>\n\t\t<FontAwesomeIcon icon={props.icon} />\n\t\t&nbsp;&nbsp;\n\t\t{props.children || 'Button!'}\n\t</BsButtonRoot>\n))\n\nexport default BsButton\n","import React, { useContext } from 'react'\nimport { useDispatch } from 'react-redux'\nimport styled from '@emotion/styled'\nimport { UtilityFloatAbsolute } from '../misc/UtilityFloat'\nimport BsButton from '../misc/BsButton'\nimport TimerContext from './TimerContext'\nimport * as style from '../misc/style'\n\nconst TimerOptionsRoot = styled(UtilityFloatAbsolute)(props => ({\n\tdisplay: 'flex',\n\tflexDirection: 'column',\n\tpadding: '10px 13px 2px',\n\tmarginLeft: '-13px',\n\twidth: '100%',\n\n\t// NOTE\n\t// Using context to change the appearance of a component from several ancestors\n\t// up without sending props up the heirarchy\n\tmarginTop: (props.view === 'menu') ? style.headerPadding : 0,\n}))\n\nconst TimerOptionButton = styled(BsButton)({\n\tmarginBottom: '8px',\n})\n\nconst TimerOptions = React.memo(props => {\n\tconst timerContext = useContext(TimerContext)\n\tconst dispatch = useDispatch()\n\n\tconst timer_id = props.instance.timer_id\n\n\tconst handleSnoozeClick = (e) => {\n\t\tdispatch({type: 'TIMER_OPTIONS_HIDE'})\n\t\tdispatch({\n\t\t\ttype: 'TIMER_SNOOZE',\n\t\t\ttimer_id,\n\t\t})\n\t}\n\n\tconst handleDeleteClick = (e) => {\n\t\tdispatch({type: 'TIMER_OPTIONS_HIDE'})\n\n\t\t// if(window.confirm('Are you sure you want to delete this timer?')) {\n\t\t\tdispatch({\n\t\t\t\ttype: 'TIMER_DELETE',\n\t\t\t\ttimer_id,\n\t\t\t})\n\t\t// }\n\t}\n\n\treturn (\n\t\t<TimerOptionsRoot view={timerContext.view}>\n\t\t\t<TimerOptionButton\n\t\t\t\tcolor=\"primaryBlue\"\n\t\t\t\ticon=\"bed\"\n\t\t\t\tonClick={handleSnoozeClick}\n\t\t\t>\n\t\t\t\t+ 5 min\n\t\t\t</TimerOptionButton>\n\t\t\t<TimerOptionButton\n\t\t\t\tcolor=\"danger\"\n\t\t\t\ticon=\"trash-alt\"\n\t\t\t\tonClick={handleDeleteClick}\n\t\t\t>\n\t\t\t\tDelete\n\t\t\t</TimerOptionButton>\n\t\t</TimerOptionsRoot>\n\t)\n})\n\nexport default TimerOptions\n","import React, { useRef, useContext, useEffect } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport styled from '@emotion/styled'\nimport { selectTimerIsShowingOptions } from '../redux/timerSelectors'\nimport TimerContext from './TimerContext'\nimport TimerWidget from './TimerWidget'\nimport TimerOptions from './TimerOptions'\n\nconst TimerRoot = styled.div({\n\tposition: 'relative',\n})\n\nconst Timer = React.memo(props => {\n\tconst containerRef = useRef(null)\n\tconst timerContext = useContext(TimerContext)\n\tconst isShowingOptions = useSelector(state => selectTimerIsShowingOptions(state, timerContext.view, props.instance.timer_id))\n\tconst dispatch = useDispatch()\n\n\tconst instance = props.instance\n\n\tuseEffect(() => {\n\t\tconst handleOutsideClick = (e) => {\n\t\t\tif(containerRef.current && !containerRef.current.contains(e.target)) {\n\t\t\t\tdispatch({type: 'TIMER_OPTIONS_HIDE'})\n\t\t\t}\n\t\t}\n\n\t\tif(isShowingOptions) {\n\t\t\tdocument.addEventListener(\"mousedown\", handleOutsideClick)\n\t\t}\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"mousedown\", handleOutsideClick)\n\t\t}\n\t}, [isShowingOptions, dispatch])\n\n\tconst handleClick = (e) => {\n\t\te.stopPropagation()\n\t\tdispatch({\n\t\t\ttype: 'TIMER_OPTIONS_SHOW',\n\t\t\ttimerContext,\n\t\t\ttimer_id: (!isShowingOptions) ? instance.timer_id : null,\n\t\t})\n\t}\n\n\treturn (\n\t\t<TimerRoot ref={containerRef} className={props.className}>\n\t\t\t<TimerWidget instance={instance} onClick={handleClick} />\n\t\t\t{isShowingOptions ? (\n\t\t\t\t<TimerOptions instance={instance} />\n\t\t\t) : null}\n\t\t</TimerRoot>\n\t)\n})\n\nexport default Timer\n","import React, { useContext } from 'react'\nimport { useDispatch } from 'react-redux'\nimport styled from '@emotion/styled'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport * as style from '../misc/style'\nimport TimerContext from './TimerContext'\nimport UnstyledButton from '../misc/UnstyledButton'\nimport BsButton from '../misc/BsButton'\n\n// NOTE\n// AddTimerButton component can be placed anywhere within a TimerContext.\n// Based on that information alone it knows how to render and behave—\n// no props required.\n\nconst MenuAddTimerButton = styled(UnstyledButton)({\n\tbackgroundColor: 'transparent',\n\tcolor: 'white',\n\tfontSize: 24,\n\tdisplay: 'flex',\n\tjustifyContent: 'center',\n\talignItems: 'center',\n\tmargin: `${style.headerPadding}px 0`,\n})\n\nconst AddTimerButton = React.memo(props => {\n\tconst timerContext = useContext(TimerContext)\n\tconst dispatch = useDispatch()\n\n\tconst handleClick = (e) => {\n\t\tdispatch({\n\t\t\ttype: 'TIMER_CREATE',\n\t\t\tduration_seconds: 70,\n\t\t\ttitle: timerContext.title,\n\t\t\trelated_view: timerContext.view,\n\t\t})\n\t}\n\t\n\tif(timerContext.view === 'menu') {\n\t\treturn (\n\t\t\t<MenuAddTimerButton onClick={handleClick}>\n\t\t\t\t<FontAwesomeIcon icon=\"plus-circle\" />\n\t\t\t</MenuAddTimerButton>\n\t\t)\n\t} else {\n\t\treturn (\n\t\t\t<BsButton color=\"primaryBlue\" icon=\"plus-circle\" onClick={handleClick}>\n\t\t\t\tAdd Timer\n\t\t\t</BsButton>\n\t\t)\n\t}\n})\n\nexport default AddTimerButton\n","import React from 'react'\nimport _ from 'lodash'\nimport { useSelector } from 'react-redux'\nimport { selectCalculatedTimers } from './redux/timerSelectors'\nimport styled from '@emotion/styled'\nimport * as style from './misc/style'\nimport TimerContext from './timer/TimerContext'\nimport HeaderClock from './HeaderClock'\nimport Timer from './timer/Timer'\nimport AddTimerButton from './timer/AddTimerButton'\n\nconst HeaderRoot = styled.div({\n\tbackgroundColor: style.color.notQuiteBlack,\n\tcolor: 'white',\n\tdisplay: 'flex',\n\tflexDirection: 'row',\n\tjustifyContent: 'space-between',\n\talignItems: 'center',\n\tpadding: style.headerPadding,\n\tposition: 'relative',\n})\n\nconst Timers = styled.div({\n\tdisplay: 'flex',\n\tflexDirection: 'row',\n\tflexWrap: 'wrap',\n\tmarginBottom: style.headerPadding * -1,\n})\n\nconst SpacedTimer = styled(Timer)({\n\tmargin: `0 ${style.headerPadding}px ${style.headerPadding}px 0`,\n})\n\nconst timerContextInfo = {\n\tview: 'menu',\n}\n\n// NOTE\n// Hooks + Redux = tidy, predictable code\n\nconst Header = React.memo(props => {\n\tconst timerInstances = useSelector(selectCalculatedTimers)\n\n\treturn (\n\t\t<HeaderRoot>\n\t\t\t<TimerContext.Provider value={timerContextInfo}>\n\t\t\t\t<Timers>\n\t\t\t\t\t{_.map(timerInstances, (instance, k) => (\n\t\t\t\t\t\t<SpacedTimer key={k} instance={instance} />\n\t\t\t\t\t))}\n\t\t\t\t\t<AddTimerButton />\n\t\t\t\t</Timers>\n\t\t\t</TimerContext.Provider>\n\t\t\t<HeaderClock />\n\t\t</HeaderRoot>\n\t)\n})\n\nexport default Header\n","import React, { useContext } from 'react'\nimport { useSelector } from 'react-redux'\nimport { selectTimerByView } from '../redux/timerSelectors'\nimport TimerContext from './TimerContext'\nimport Timer from './Timer'\nimport AddTimerButton from './AddTimerButton'\n\n// NOTE\n// this component shows the timer for the current TimerContext view,\n// or if there isn't one, an Add Timer button\n\nconst ViewTimerContainer = React.memo(props => {\n\tconst timerContext = useContext(TimerContext)\n\tconst instance = useSelector(state => selectTimerByView(state, timerContext.view))\n\n\treturn (\n\t\t<div className={props.className}>\n\t\t\t{instance ? (\n\t\t\t\t<Timer instance={instance} />\n\t\t\t) : (\n\t\t\t\t<AddTimerButton />\n\t\t\t)}\n\t\t</div>\n\t)\n})\n\nexport default ViewTimerContainer\n","import styled from '@emotion/styled'\nimport * as style from '../misc/style'\nimport ViewTimerContainer from '../timer/ViewTimerContainer'\n\nexport const Box = styled.div({\n\tborderWidth: 5,\n\tborderStyle: 'solid',\n\tborderColor: style.color.notQuiteBlack,\n\tborderRadius: style.borderRadius,\n\tpadding: 20,\n\toverflow: 'hidden',\n})\n\nexport const BoxTitle = styled.div({\n\tborderBottomWidth: 2,\n\tborderBottomStyle: 'solid',\n\tborderBottomColor: style.color.notQuiteBlack,\n\tmarginBottom: 10,\n})\n\n// NOTE\n// You can create a restyled React component from any component that accepts\n// the `className` prop, like ViewTimerContainer\n\nexport const BoxViewTimerContainer = styled(ViewTimerContainer)({\n\tmarginBottom: 10,\n})\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { Box, BoxTitle, BoxViewTimerContainer } from './Box'\nimport * as style from '../misc/style'\n\nconst ReadmeBoxRoot = styled(Box)({\n\tgridColumn: '1/3',\n})\n\nconst SuccessSpan = styled.span({\n\tcolor: style.color.success,\n})\n\nconst SuccessLink = styled(SuccessSpan)({\n\ttextDecoration: 'none',\n\t'&:hover': {\n\t\ttextDecoration: 'underline',\n\t}\n}).withComponent('a')\n\nconst SrcA = React.memo(props => (\n\t<SuccessLink href={'https://github.com/cblackcom/demo-timers/blob/master/src/' + props.file}>{props.children}</SuccessLink>\n))\n\nconst CommentSpan = styled(SuccessSpan)({\n\tfontFamily: 'monospace',\n\tfontWeight: 'bold',\n})\n\nconst SpinningIcon = styled(FontAwesomeIcon)({\n\t'&:hover': {\n\t\tanimation: `${style.rotateKeyframes} .5s linear infinite`,\n\t},\n})\n\nconst GrantMessage = styled.span({\n\tfontSize: '80%',\n\tcolor: '#555',\n})\n\nconst ReadmeBox = React.memo(props => {\n\treturn (\n\t\t<ReadmeBoxRoot>\n\t\t\t<BoxTitle>README box.</BoxTitle>\n\t\t\t<p>\n\t\t\t\tWelcome to demo-timers.  This is a demo of some tricks\n\t\t\t\tand techniques I have picked up over the last couple\n\t\t\t\tof years in front-end.\n\t\t\t</p>\n\t\t\t<BoxViewTimerContainer />\n\t\t\t<p>\n\t\t\t\tLinks to example code highlights in&nbsp;\n\t\t\t\t<SuccessSpan>green</SuccessSpan> below—<br/>\n\t\t\t\tlook for&nbsp;\n\t\t\t\t{/* eslint-disable-next-line */}\n\t\t\t\t<CommentSpan>// NOTE </CommentSpan> comments in the files for\n\t\t\t\tadditional commentary.\n\t\t\t</p>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\tReact 16.8+&nbsp;\n\t\t\t\t\t<a href=\"https://reactjs.org/docs/hooks-overview.html\">Hooks</a> and&nbsp;\n\t\t\t\t\t<a href=\"https://reactjs.org/docs/react-api.html#reactmemo\">Memoized Components</a>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>for tidy, predictable code</li>\n\t\t\t\t\t\t<li><SrcA file=\"HeaderClock.jsx\">HeaderClock component</SrcA></li>\n\t\t\t\t\t\t<li><SrcA file=\"Header.jsx\">Header component</SrcA></li>\n\t\t\t\t\t\t<li><SrcA file=\"boxes/CatBox.jsx\">CatBox component</SrcA></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"https://reactjs.org/docs/context.html\">Context</a> +&nbsp;\n\t\t\t\t\t<a href=\"https://reactjs.org/docs/hooks-reference.html#usecontext\">useContext hook</a>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li><i>\"...provides a way to pass data through the component tree without having to pass props down manually at every level...\"</i></li>\n\t\t\t\t\t\t<li><SrcA file=\"timer/TimerContext.js\">Timer Context</SrcA></li>\n\t\t\t\t\t\t<li><SrcA file=\"Root.jsx\">Root component</SrcA></li>\n\t\t\t\t\t\t<li><SrcA file=\"timer/AddTimerButton.jsx\">AddTimerButton component</SrcA></li>\n\t\t\t\t\t\t<li><SrcA file=\"timer/ViewTimerContainer.jsx\">ViewTimerContainer component</SrcA></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\tRedux\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>a global database with auto UI binding... if you use it right</li>\n\t\t\t\t\t\t<li><SrcA file=\"redux/timerReducer.js\">Timer Reducer</SrcA> (standard stuff)</li>\n\t\t\t\t\t\t<li><SrcA file=\"movement.js\">movement.js</SrcA></li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<SrcA file=\"jeff/\">\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"cannabis\" /> Alternative patterns for Jeff <FontAwesomeIcon icon=\"cannabis\" />\n\t\t\t\t\t\t\t</SrcA>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"https://github.com/zalmoxisus/redux-devtools-extension\">redux-devtools</a> introspection tool&nbsp;\n\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"thumbs-up\" />\t\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"https://redux.js.org/recipes/computing-derived-data\">Reselect — Memoized Selectors</a> for derived data\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li><SrcA file=\"redux/timerSelectors.js\">Timer Selectors</SrcA></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"https://emotion.sh\">Emotion</a>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>combines the styling into the component</li>\n\t\t\t\t\t\t<li><SrcA file=\"boxes/Box.jsx\">Box components</SrcA></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li><SrcA file=\"misc/useDebouncedWindowSize.js\">useDebouncedWindowSize custom hook</SrcA></li>\n\t\t\t\t<li><SrcA file=\"timer/TimerProgressIndicator.jsx\">TimerProgressIndicator component</SrcA></li>\n\t\t\t</ul>\n\t\t\t<p>\n\t\t\t\t<SpinningIcon icon=\"head-side-cough\" />\n\t\t\t\t&nbsp;&nbsp;\n\t\t\t\t<GrantMessage>\n\t\t\t\t\tGrant for this development time generously provided by the Coronavirus\n\t\t\t\t</GrantMessage>\n\t\t\t</p>\n\t\t</ReadmeBoxRoot>\n\t)\n})\n\nexport default ReadmeBox\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { Box, BoxTitle, BoxViewTimerContainer } from './Box'\n\n// NOTE\n// Hooks + Redux = tidy, predictable code\n\nconst Cat = styled.img({\n\twidth: '100%',\n})\n\nconst CatBox = React.memo(props => (\n\t<Box>\n\t\t<BoxTitle>CAT BOX!</BoxTitle>\n\t\t<p>\n\t\t\tThis cat (picture) wants to be timed.<br/>\n\t\t\tGive it a go!  It's so enjoyable!\n\t\t</p>\n\t\t<BoxViewTimerContainer />\n\t\t<Cat src={`//cataas.com/cat?v=${Math.random()}`}/>\n\t</Box>\n))\n\nexport default CatBox\n","import React, { useContext, useRef, useState, useLayoutEffect } from 'react'\nimport _ from 'lodash'\nimport $ from 'jquery'\nimport styled from '@emotion/styled'\nimport { useDispatch } from 'react-redux'\nimport YouTube from 'react-youtube'\nimport TimerContext from '../timer/TimerContext'\nimport { useDebouncedWindowSize2 } from '../misc/useDebouncedWindowSize'\nimport { Box, BoxTitle, BoxViewTimerContainer } from './Box'\n\nconst VIDEOS = {\n\t'e1bEWoblGZA': 'Unbox a box',\n\t'0qBqvfH2YY4': 'Unbox a car',\n}\n\n// aspect ratio\nconst getHeight = (width) => (width * 9/16)\n\nconst SelectContainer = styled.div({\n\tmarginBottom: 10,\n})\n\nconst VideoFrameContainer = styled.div({\n\t// Create just the right space for the youtube video,\n\t// and position it over that space rather than IN the space,\n\t// so that the video doesn't push around the parent box's bounds\n\t// during resize, and cause this box to be larger than it should be\n\t// maintaining aspect ratio: https://css-tricks.com/aspect-ratio-boxes/\n\twidth: '100%',\n\toverflow: 'hidden',\n\theight: 0,\n\tpaddingTop: getHeight(100) + '%',\n\tposition: 'relative',\n\t'> *': {\n\t\tposition: 'absolute',\n\t\ttop: 0,\n\t\tleft: 0,\n\t}\n})\n\nconst VideoBox = React.memo(props => {\n\tconst timerContext = useContext(TimerContext)\n\tconst videoContainerRef = useRef(null)\n\tconst [videoId, setVideoId] = useState(_.keys(VIDEOS)[0])\n\tconst windowSize = useDebouncedWindowSize2(500)\n\tconst [measuredWidth, setMeasuredWidth] = useState(100)\n\tconst dispatch = useDispatch()\n\n\tuseLayoutEffect(() => {\n\t\tconsole.debug('windowSize is:', windowSize)\n\t\tsetMeasuredWidth($(videoContainerRef.current).innerWidth())\n\t}, [windowSize, setMeasuredWidth, videoContainerRef])\n\n\tconst handleVideoChange = (e) => {\n\t\tsetVideoId(e.currentTarget.value)\n\t}\n\n\tconst deleteRelatedTimers = () => {\n\t\tdispatch({\n\t\t\ttype: 'TIMER_DELETE',\n\t\t\trelated_view: timerContext.view,\n\t\t})\n\t}\n\n\tconst handlePlay = (e) => {\n\t\tdeleteRelatedTimers()\n\t\tconst duration_seconds = Math.floor(e.target.getDuration() - e.target.getCurrentTime())\n\t\tdispatch({\n\t\t\ttype: 'TIMER_CREATE',\n\t\t\tduration_seconds,\n\t\t\ttitle: timerContext.title,\n\t\t\trelated_view: timerContext.view,\n\t\t})\n\t}\n\n\tconst handlePause = (e) => {\n\t\tdeleteRelatedTimers()\n\t}\n\n\tconst videoOpts = {\n\t\twidth: measuredWidth,\n\t\theight: getHeight(measuredWidth),\n\t}\n\n\treturn (\n\t\t<Box>\n\t\t\t<BoxTitle>Unboxing Box.</BoxTitle>\n\t\t\t<p>\n\t\t\t\tYay baby got cool sunglasses 🕶\n\t\t\t</p>\n\t\t\t<SelectContainer>\n\t\t\t\tVideo:\n\t\t\t\t&nbsp;&nbsp;\n\t\t\t\t<select value={videoId} onChange={handleVideoChange}>\n\t\t\t\t\t{_.map(VIDEOS, (v, k) => (\n\t\t\t\t\t\t<option key={k} value={k}>{v}</option>\n\t\t\t\t\t))}\n\t\t\t\t</select>\n\t\t\t</SelectContainer>\n\t\t\t<BoxViewTimerContainer />\n\t\t\t<VideoFrameContainer ref={videoContainerRef}>\n\t\t\t\t<YouTube\n\t\t\t\t\tvideoId={videoId}\n\t\t\t\t\topts={videoOpts}\n\t\t\t\t\tonPlay={handlePlay}\n\t\t\t\t\tonPause={handlePause}\n\t\t\t\t/>\n\t\t\t</VideoFrameContainer>\n\t\t</Box>\n\t)\n})\n\nexport default VideoBox\n","import { useState, useLayoutEffect } from 'react'\nimport { useDebounce } from 'use-debounce'\nimport $ from 'jquery'\nimport _ from 'lodash'\n\nconst DEFAULT_DELAY_MS = 250\n\n// NOTE\n//\n// We need to write a hook to help our VideoBox component know when the Window\n// has been resized, so that it can send a new size param to the YouTube API.\n//\n// There are two custom hooks here with slightly different approaches.\n//\n// This first one uses useDebounce hook — which is a very cool hook because it\n// can easily debounce local state changes, prop changes, Redux state changes...\n\nexport const useDebouncedWindowSize1 = (delay = DEFAULT_DELAY_MS) => {\n\tconst [windowSize, setWindowSize] = useState([0, 0])\n\tconst [debouncedWindowSize] = useDebounce(windowSize, delay)\n\n\tuseLayoutEffect(() => {\n\t\tconst handleResize = (e) => {\n\t\t\tsetWindowSize([$(window).width(), $(window).height()])\n\t\t}\n\n\t\thandleResize()\n\t\twindow.addEventListener('resize', handleResize)\n\t\treturn () => {\n\t\t\twindow.removeEventListener('resize', handleResize)\n\t\t}\n\t}, [])\n\n\treturn debouncedWindowSize\n}\n\n// NOTE\n// This second one is more efficient because it debounces the resize handler,\n// so it remeasures the window less often.  But the net result to the component\n// consuming the hook, and the number of its re-renders, will be the same.\n\nexport const useDebouncedWindowSize2 = (delay = DEFAULT_DELAY_MS) => {\n\tconst [windowSize, setWindowSize] = useState([0, 0])\n\n\tuseLayoutEffect(() => {\n\t\tconst handleResize = _.debounce((e) => {\n\t\t\tsetWindowSize([$(window).width(), $(window).height()])\n\t\t}, delay)\n\n\t\thandleResize()\n\t\twindow.addEventListener('resize', handleResize)\n\t\treturn () => {\n\t\t\twindow.removeEventListener('resize', handleResize)\n\t\t}\n\t}, [delay])\n\n\treturn windowSize\n}\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport TimerContext from './timer/TimerContext'\nimport Header from './Header'\nimport ReadmeBox from './boxes/ReadmeBox'\nimport CatBox from './boxes/CatBox'\nimport VideoBox from './boxes/VideoBox'\n\nconst RootContainer = styled.div({\n\tdisplay: 'flex',\n\tflexDirection: 'column',\n})\n\nconst BoxContainer = styled.div({\n\tdisplay: 'grid',\n\tgridTemplateColumns: '1fr',\n\tpadding: 20,\n\tgap: 20,\n\t'@media (min-width: 780px)': {\n\t\tgridTemplateColumns: '1fr 1fr',\n\t},\n})\n\nconst Root = React.memo(props => (\n\t<RootContainer>\n\t\t<TimerContext.Provider value={{view: 'menu'}}>\n\t\t\t<Header />\n\t\t</TimerContext.Provider>\n\n\t\t<BoxContainer>\n\t\t\t<TimerContext.Provider value={{view: 'catBox', title: 'Cat Box', widgetDisplay: 'jumbo'}}>\n\t\t\t\t<CatBox />\n\t\t\t</TimerContext.Provider>\n\n\t\t\t<TimerContext.Provider value={{view: 'videoBox', title: 'Video Box', widgetDisplay: 'jumbo'}}>\n\t\t\t\t<VideoBox />\n\t\t\t</TimerContext.Provider>\n\n\t\t\t<TimerContext.Provider value={{view: 'readmeBox', title: 'README Box', widgetDisplay: 'jumbo'}}>\n\t\t\t\t<ReadmeBox />\n\t\t\t</TimerContext.Provider>\n\t\t</BoxContainer>\n\t</RootContainer>\n))\n\nexport default Root\n","import store from './redux/store'\n\n// NOTE\n// This simple javascript class updates the `state.timer.movement` branch of\n// the state tree by dispatching once per second.\n// Because the `selectCalculatedTimers` memoized selector depends on\n// `state.timer.movement.epochTime`, all timers are updated automatically\n// in unison.\n\nclass TimerMovement {\n\t__construct() {\n\t\tthis.timeout = null\n\t\tthis.unsubscribe = null\n\t\tthis.currentState = null\n\t}\n\n\tstart = () => {\n\t\tif(!this.unsubscribe) {\n\t\t\tthis.unsubscribe = store.subscribe(this.handleStoreUpdate)\n\t\t\tthis.handleStoreUpdate()\n\t\t\tconst tick = this.handleTick()\n\t\t\tconsole.debug('[TimerMovement] started at ' + tick)\n\t\t}\n\t}\n\n\tstop = () => {\n\t\tif(this.timeout) {\n\t\t\tclearTimeout(this.timeout)\n\t\t}\n\t\tif(this.unsubscribe) {\n\t\t\tthis.unsubscribe()\n\t\t\tconsole.debug('[TimerMovement] stopped')\n\t\t}\n\t}\n\n\thandleTick = () => {\n\t\tconst time = Date.now()\n\t\tconst mod = (time % 1000)\n\t\tconst clientTick = (time - mod)\n\t\tconst epochTime = Math.floor(time / 1000)\n\n\t\tstore.dispatch({\n\t\t\ttype: 'TIMER_MOVEMENT_TICK',\n\t\t\tclientTick,\n\t\t\tmod,\n\t\t\tepochTime,\n\t\t})\n\n\t\tthis.timeout = setTimeout(this.handleTick, 1000 - mod + 1)\n\t\treturn clientTick\n\t}\n\n\thandleStoreUpdate = () => {\n\t\t// const movement = store.getState().timer.movement\n\t\t// if(movement !== this.currentState) {\n\t\t// \tconsole.debug('[TimerMovement] movement update', movement)\n\t\t// \tthis.currentState = movement\n\t\t// }\n\t}\n}\n\nconst movement = new TimerMovement()\nexport default movement\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport store from './redux/store'\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { faTrashAlt, faBed, faPlusCircle, faCannabis, faThumbsUp, faBookOpen, faHeadSideCough } from '@fortawesome/free-solid-svg-icons'\nimport Root from './Root'\nimport movement from './movement'\nimport addInitialTimers from './jeff/addInitialTimers'\n\nlibrary.add(faTrashAlt, faBed, faPlusCircle, faCannabis, faThumbsUp, faBookOpen, faHeadSideCough)\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Provider store={store}>\n\t\t\t<Root />\n\t\t</Provider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n)\n\nmovement.start()\naddInitialTimers()\n","import store from '../redux/store'\nimport { insertRecord } from './jeffsActions'\nimport { selectTimerNextUnusedId } from '../redux/timerReducer'\n\nexport default () => {\n\n\t// NOTE\n\t// Two very different ways to start a timer via Redux,\n\t// Same net effect\n\n\tstore.dispatch({\n\t\ttype: 'TIMER_CREATE',\n\t\ttitle: 'Timer Uno',\n\t\tduration_seconds: 70,\n\t})\n\n\tconst state = store.getState()\n\tinsertRecord('timer.instances', {\n\t\ttimer_id: selectTimerNextUnusedId(state.timer),\n\t\tstart_time: state.timer.movement.epochTime,\n\t\tduration_seconds: 120,\n\t\ttitle: 'Timer Dos',\n\t})\n\n}\n"],"sourceRoot":""}