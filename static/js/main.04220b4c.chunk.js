(this["webpackJsonpdemo-timers"]=this["webpackJsonpdemo-timers"]||[]).push([[0],{32:function(e,t,n){e.exports=n(45)},45:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(14),o=n.n(a),c=n(4),l=n(9),u=n(15),s=n(3),m=n(13),d=n(5),p=n.n(d),f=function(e){return Math.max.apply(Math,[0].concat(Object(m.a)(p.a.map(e.instances,"timer_id"))))+1},E={movement:{clientTick:null,mod:null,epochTime:null},instances:[],showOptionsOnId:{menu:null}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TIMER_MOVEMENT_TICK":return Object(s.a)({},e,{movement:Object(s.a)({},e.movement,{clientTick:t.clientTick,mod:t.mod,epochTime:t.epochTime})});case"TIMER_CREATE":return Object(s.a)({},e,{instances:[].concat(Object(m.a)(e.instances),[{timer_id:f(e),start_time:e.movement.epochTime,duration_seconds:70,title:"Yo!"}])});case"TIMER_SNOOZE":return Object(s.a)({},e,{instances:e.instances.map((function(e){return e.timer_id===t.timer_id?Object(s.a)({},e,{duration_seconds:e.duration_seconds+300}):e}))});case"TIMER_DELETE":return Object(s.a)({},e,{instances:e.instances.filter((function(e){return e.timer_id!==t.timer_id}))});case"TIMER_OPTIONS_SHOW":return Object(s.a)({},e,{showOptionsOnId:Object(u.a)({},t.timerContext.view,t.timer_id)});case"TIMER_OPTIONS_HIDE":return Object(s.a)({},e,{showOptionsOnId:p.a.mapValues(e.showOptionsOnId,(function(){return null}))});default:return e}},h=function(e){return function(t,n){return t=function(e,t){if("INSERT_RECORD"===t.type){var n=Object(s.a)({},e),r=p.a.get(e,t.path);if(!p.a.isArray(r))throw new Error("Couldn't find destination array");return p.a.set(n,t.path,[].concat(Object(m.a)(r),[t.record])),n}return e}(t=e(t,n),n)}}(Object(l.b)({timer:b})),O=Object(l.c)(h,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),v=n(11),_=n(21),T=n(24),g=n(25),w=new(function(){function e(){var t=this;Object(T.a)(this,e),this.start=function(){if(!t.unsubscribe){t.unsubscribe=O.subscribe(t.handleStoreUpdate),t.handleStoreUpdate();var e=t.handleTick();console.debug("[TimerMovement] started at "+e)}},this.stop=function(){t.timeout&&clearTimeout(t.timeout),t.unsubscribe&&(t.unsubscribe(),console.debug("[TimerMovement] stopped"))},this.handleTick=function(){var e=Date.now(),n=e%1e3,r=e-n,i=Math.floor(e/1e3);return O.dispatch({type:"TIMER_MOVEMENT_TICK",clientTick:r,mod:n,epochTime:i}),t.timeout=setTimeout(t.handleTick,1e3-n+1),r},this.handleStoreUpdate=function(){}}return Object(g.a)(e,[{key:"__construct",value:function(){this.timeout=null,this.unsubscribe=null,this.currentState=null}}]),e}()),x=n(2),I=n(28);n(31);function j(e){var t=Math.abs(e),n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60);t=t-3600*n-60*r;var i=e<0?"-":"";return i+=n<10?"0"+n:n,i+=":"+(r<10?"0"+r:r),i+=":"+((t=Math.round(100*t)/100)<10?"0"+t:t)}var R=function(e,t){return e.timeRemaining-t.timeRemaining},k=Object(I.a)((function(e){return e.timer.movement.epochTime}),(function(e){return e.timer.instances}),(function(e,t){return t.map((function(t){var n=e-t.start_time,r=t.start_time+t.duration_seconds-e,i=n/t.duration_seconds;return Object(s.a)({},t,{timeElapsed:n,timeRemaining:r,formattedTime:j(r),progress:i})})).sort(R)})),y=x.a.div({fontSize:"16px"}),C=i.a.memo((function(e){var t=Object(c.c)((function(e){return e.timer.movement.clientTick})),n=new Date(t);return i.a.createElement(y,null,n.toString())})),M=Object(r.createContext)({view:"modal"}),S={boringGrey:"#d9534f",success:"#5cb85c",danger:"#d9534f",primaryBlue:"#517ffc"},D=n(29),N=n(12);function P(){var e=Object(D.a)(["50% { fill: white; }"]);return P=function(){return e},e}var A=Math.PI,B=x.a.circle((function(e){return{strokeWidth:2,stroke:e.stroke||S.boringGrey,fill:"transparent"}})),H=x.a.path({strokeWidth:3,stroke:"white",fill:"transparent"}),L=H.withComponent("circle"),U=Object(N.b)(P()),V=x.a.path({fill:"transparent",animation:"".concat(U," 1s step-start infinite")}),W=i.a.memo((function(e){var t=e.R||13.5,n=2*(t+3),r=n,a=n/2,o=r/2,c=a,l=o-t,u=-1.4+a-1.85,s=13+o-6.62,m=Math.max(e.progress||0,0),d=null;if(m<1){var p=-.5*A-m*(2*A),f=Math.cos(p)*t+a,E=Math.sin(p)*t+o,b=m<=.5?0:1,h="M ".concat(c," ").concat(l," A ").concat(t," ").concat(t," 0 ").concat(b," 0 ").concat(f," ").concat(E);d=i.a.createElement(H,{d:h})}return i.a.createElement("svg",{width:n,height:r,viewBox:"0 0 ".concat(n," ").concat(r)},i.a.createElement(B,{cx:a,cy:o,r:t,stroke:e.trackColor}),d||i.a.createElement(i.a.Fragment,null,i.a.createElement(L,{cx:a,cy:o,r:t}),i.a.createElement(V,{d:"M4.716-13.113v5.148a13.6,13.6,0,0,1-.1,1.643q-.1.814-.261,1.66H2.466Q2.3-5.508,2.2-6.322a13.6,13.6,0,0,1-.1-1.643v-5.148ZM1.8-1.413a1.494,1.494,0,0,1,.121-.6A1.524,1.524,0,0,1,2.254-2.5a1.589,1.589,0,0,1,.5-.329,1.6,1.6,0,0,1,.63-.122,1.581,1.581,0,0,1,.621.122,1.645,1.645,0,0,1,.5.329,1.49,1.49,0,0,1,.338.486,1.494,1.494,0,0,1,.122.6,1.526,1.526,0,0,1-.122.608,1.477,1.477,0,0,1-.338.491,1.58,1.58,0,0,1-.5.324,1.634,1.634,0,0,1-.621.117,1.658,1.658,0,0,1-.63-.117,1.527,1.527,0,0,1-.5-.324,1.511,1.511,0,0,1-.333-.491A1.526,1.526,0,0,1,1.8-1.413Z",transform:"translate(".concat(u," ").concat(s,")")})))})),z=x.a.div((function(e){return{backgroundColor:e.backgroundColor,color:"white",borderRadius:5,display:"flex",flexDirection:"row",justifyContent:"center",padding:"7px 15px",cursor:"pointer"}})),X=x.a.div({flex:"0 0 auto",overflow:"hidden",paddingRight:"7px",display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"}),Z=x.a.div({flex:"1 1 auto",overflow:"hidden",paddingLeft:"7px",paddingTop:"2.5px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",textAlign:"left"}),G=x.a.div({fontSize:"14px",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%",overflow:"hidden"}),J=x.a.div({fontSize:"12px"}),K=i.a.memo((function(e){var t=e.instance,n=S.success,r="#479644";return t.timeRemaining<=0?(n=S.danger,r="white"):t.timeRemaining<60&&(n="#EB9D50",r="#C37427"),i.a.createElement(z,{backgroundColor:n,onClick:e.onClick},i.a.createElement(X,null,i.a.createElement(W,{R:e.indicatorR,trackColor:r,progress:t.progress})),i.a.createElement(Z,null,i.a.createElement(G,null,t.title),i.a.createElement(J,null,t.formattedTime)))})),q=x.a.div({backgroundColor:"white",boxShadow:"0px 3px 6px rgba(0,0,0,.16)",borderRadius:"0 0 ".concat(5," ").concat(5)}),F=Object(x.a)(q)({position:"absolute",minWidth:"100%"}),Q=n(30),Y=x.a.button((function(e){return{display:"inline-block",cursor:"pointer",backgroundImage:"none",border:"1px solid transparent",whiteSpace:"nowrap",padding:"6px 12px",fontSize:"14px",userSelect:"none",borderRadius:5,backgroundColor:S[e.backgroundColor]||S.boringGrey,color:"white",outline:"none","&:hover":{color:"#ddd"}}})),$=i.a.memo((function(e){return i.a.createElement(Y,{backgroundColor:e.color,className:e.className,onClick:e.onClick},i.a.createElement(Q.a,{icon:e.icon}),"\xa0\xa0",e.children||"Button!")})),ee=Object(x.a)(F)((function(e){return{display:"flex",flexDirection:"column",padding:"10px 13px 2px",marginTop:"menu"===e.view?10:0}})),te=Object(x.a)($)({marginBottom:"8px"}),ne=i.a.memo((function(e){var t=Object(r.useContext)(M),n=Object(c.b)(),a=e.instance.timer_id;return i.a.createElement(ee,{view:t.view},i.a.createElement(te,{color:"primaryBlue",icon:"bed",onClick:function(e){n({type:"TIMER_OPTIONS_HIDE"}),n({type:"TIMER_SNOOZE",timer_id:a})}},"+ 5 min"),i.a.createElement(te,{color:"danger",icon:"trash-alt",onClick:function(e){n({type:"TIMER_OPTIONS_HIDE"}),window.confirm("Are you sure you want to delete this timer?")&&n({type:"TIMER_DELETE",timer_id:a})}},"Delete"))})),re=x.a.div({position:"relative"}),ie=i.a.memo((function(e){var t=Object(r.useRef)(null),n=Object(r.useContext)(M),a=Object(c.c)((function(t){return function(e,t,n){return e.timer.showOptionsOnId[t]===n}(t,n.view,e.instance.timer_id)})),o=Object(c.b)(),l=e.instance;Object(r.useEffect)((function(){var e=function(e){t.current&&!t.current.contains(e.target)&&o({type:"TIMER_OPTIONS_HIDE"})};return a&&document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[a,o]);return i.a.createElement(re,{ref:t,className:e.className},i.a.createElement(K,{instance:l,onClick:function(e){e.stopPropagation(),o({type:"TIMER_OPTIONS_SHOW",timerContext:n,timer_id:a?null:l.timer_id})}}),a?i.a.createElement(ne,{instance:l}):null)})),ae=x.a.div({backgroundColor:"#1a1a1a",color:"white",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:10,position:"relative"}),oe=x.a.div({display:"flex",flexDirection:"row"}),ce=Object(x.a)(ie)({marginRight:"8px"}),le={view:"menu"},ue=i.a.memo((function(e){var t=Object(c.c)(k);return i.a.createElement(ae,null,i.a.createElement(M.Provider,{value:le},i.a.createElement(oe,null,t.map((function(e){return i.a.createElement(ce,{instance:e})})))),i.a.createElement(C,null))}));v.b.add(_.b,_.a);var se=i.a.memo((function(e){return i.a.createElement(ue,null)}));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(c.a,{store:O},i.a.createElement(se,null))),document.getElementById("root")),w.start(),function(){O.dispatch({type:"TIMER_CREATE",title:"Timer Uno"});var e,t,n=O.getState();e="timer.instances",t={timer_id:f(n.timer),start_time:n.timer.movement.epochTime,duration_seconds:120,title:"Timer Dos"},O.dispatch(function(e,t){return{type:"INSERT_RECORD",path:e,record:t}}(e,t))}()}},[[32,1,2]]]);
//# sourceMappingURL=main.04220b4c.chunk.js.map